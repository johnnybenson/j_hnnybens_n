var j_nnybens_n=(function(){var a=(document.body.className.indexOf("dev")!==-1);function n(){if(window.location.hash===""){window.location.hash="home";}}function m(){$(document).unbind("keyup.esc").bind("keyup.esc",function(o){if(o.keyCode===27){window.location.hash="home";}if(o.keyCode===74){d();}if(o.keyCode===75){c();}});}function f(){setTimeout(function(){if(window.location.hash==="#home"||window.location.hash===""){$(".navigation .home").addClass("at-home");}else{$(".navigation .home").removeClass("at-home");}},0);}function i(){var o=$('a[href="#prev"]');o.unbind("click.prev").bind("click.prev",function(){d();return false;});}function l(){var o=$('a[href="#next"]');o.unbind("click.next").bind("click.next",function(){c();return false;});}function c(){var r=$("section"),o=$(window.location.hash),p=r.index(o),q;if(!p){q=$(r[1]);}else{q=(p&&p<r.length-1)?$(r[p+1]):$(r[0]);}b(q);window.location.hash=q.attr("id");}function d(){window.history.back();}function b(p){var o=p.find("img.lazy");o.each(function(){var q=$(this);q.attr("src",q.data("original"));});}function h(o){a=o;}function j(){return a;}function g(){$('a[rel="external"]').attr("target","_blank");}function k(){var o=$('#friend-stuff a[rel="external"]');$(".the-secret-button").unbind("click.secret").bind("click.secret",function(){o.each(function(p){var q=$(this);window.open(q.attr("href"),"_newtab"+p);});return false;});}function e(o){if(window.console&&window.console.log&&a===true){window.console.log(o);}}return{initialize:function(){n();m();g();f();i();l();k();$(window).unbind("hashchange.j_b").bind("hashchange.j_b",function(){f();});}};})();$(function(){j_nnybens_n.initialize();});